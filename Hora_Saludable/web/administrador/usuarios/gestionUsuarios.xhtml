<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">

    <body>

        <ui:composition template="./../../plantillas/frontEndAdministrador.xhtml">

            <ui:define name="titulo">
                Gestión Usuarios
                
            </ui:define>           

            <ui:define name="title">
                <div class="tituloContenido">
                    GESTIÓN DE USUARIOS                    
                </div>
                
            </ui:define>

            <ui:define name="body">
                
                <br/>
                    <h:form id="seleccionarUsuarios">
                        <h:panelGrid columns="3">        
                                
                            <p:outputLabel styleClass="CampoLabel" value="Seleccione Tipo Usuario:" />                      
                                    <p:selectOneMenu  id="tipoUsuario" style="width:150px;font-size: 15px;" required="true"
                                    requiredMessage="Seleccione un Tipo Usuario."
                                    valueChangeListener="#{mostrarUsuariosController.cambiarTipoUsuario}"
                                     >
                                        <f:selectItem itemLabel="Seleccione.." itemValue="Seleccione" />
                                        <f:selectItems value="#{mostrarUsuariosController.listaTiposdeUsuario}"
                                                       var="usuarios" itemLabel="#{usuarios}" itemValue="#{usuarios}"/>
                                        <p:ajax update=":tablasUsuarios"/>
                                        <p:ajax onstart="PF('efectoCarga').show()"  onsuccess="PF('efectoCarga').hide()"/>                                        
                                    </p:selectOneMenu>                     
                                    <p:commandButton  value="Registrar Nuevo Usuario" style="background:#22419A; 
                                         color: #FFFFFF; margin-left: 395px;" 
                                         action="#{registrarUsuarioController.abrirVentanaRegistrarUsuario()}"
                                    onstart="PF('efectoCarga').show()"  onsuccess="PF('efectoCarga').hide()"/>
                                        
                                                     
                        </h:panelGrid>
                    </h:form>                   
                        <p:separator/>
                        <br/>
                    <h:form id="tablasUsuarios">
                        <h:panelGrid style="margin-bottom: 10px;" rendered="#{mostrarUsuariosController.habilitarFuncionarios}" columns="3">                      
                            <h:outputLabel class="CampoLabel" value="Nombre del Funcionario:" />
                            <p:inputText style="width: 240px;" value="#{mostrarUsuariosController.nombreFuncionario}"  >
                                <p:ajax event="keyup" update="tablaFuncionario" listener="#{mostrarUsuariosController.buscarPorNombreFuncionario}" />                                
                            </p:inputText>                                                   
                        </h:panelGrid>
                        <p:panel id="tablaFuncionario" rendered="#{mostrarUsuariosController.habilitarFuncionarios}">                                            
                            <p:dataTable  var="funcionario" value="#{mostrarUsuariosController.listaFuncionarios}"
                                         paginator="true" rows="10"  
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                                         rowsPerPageTemplate="5,10,15">

                                <p:column headerText="No. Identificacion" width="100">                               
                                    #{funcionario.usuidentificacion}
                                </p:column> 
                                <p:column headerText="Nombres">
                                #{funcionario.usunombres}
                                </p:column>
                                <p:column headerText="Apellidos">
                                #{funcionario.usuapellidos}
                                </p:column>                             
                                <p:column headerText="Cargo">
                                #{funcionario.carid.carnombre}
                                </p:column>
                                <p:column headerText="Facultad">
                                #{funcionario.uniid.uninombre}
                                </p:column>
                                <p:column headerText="Acciones" width="90">
                                    <h:link id="ver" style="text-decoration: none; ">                                    
                                        <p:graphicImage style="width:20px;margin-left: 5px;" library="img/usuarios" name="ver.png"/>
                                    </h:link>
                                    <h:link id="editar" style="text-decoration: none;margin-left: 5px; ">                                    
                                        <p:graphicImage style="width:20px;" library="img/usuarios" name="editar.png"/>
                                    </h:link>
                                    <h:link id="eliminar" style="text-decoration: none;margin-left: 5px; ">                                    
                                        <p:graphicImage style="width:20px; " library="img/usuarios" name="eliminar.png"/>
                                    </h:link>
                                </p:column> 

                            </p:dataTable>
                        </p:panel>
                        
                        
                        <h:panelGrid style="margin-bottom: 10px;" rendered="#{mostrarUsuariosController.habilitarEstudiantes}" columns="3">                      
                            <h:outputLabel class="CampoLabel" value="Nombre del Estudiante:" />
                            <p:inputText style="width: 240px;" value="#{mostrarUsuariosController.nombreEstudiante}"  >
                                <p:ajax event="keyup" update="tablaEstudiante" listener="#{mostrarUsuariosController.buscarPorNombreEstudiante}" />                                
                            </p:inputText>                       
                        </h:panelGrid>
                        <p:panel id="tablaEstudiante" rendered="#{mostrarUsuariosController.habilitarEstudiantes}">
                            <p:dataTable  var="estudiantes" value="#{mostrarUsuariosController.listaestudiantes}"
                                         paginator="true" rows="10"  
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                                         rowsPerPageTemplate="5,10,15">

                                <p:column headerText="No. Identificacion" width="100">                               
                                    #{estudiantes.usuidentificacion}
                                </p:column> 
                                <p:column headerText="Nombres">
                                #{estudiantes.usunombres}
                                </p:column>
                                <p:column headerText="Apellidos">
                                #{estudiantes.usuapellidos}
                                </p:column>                            
                                <p:column headerText="Facultad">
                                #{estudiantes.uniid.uninombre}
                                </p:column> 
                                <p:column headerText="Acciones" width="90">
                                    <h:link id="ver" style="text-decoration: none; ">                                    
                                        <p:graphicImage style="width:20px;margin-left: 5px;" library="img/usuarios" name="ver.png"/>
                                    </h:link>
                                    <h:link id="editar" style="text-decoration: none;margin-left: 5px; ">                                    
                                        <p:graphicImage style="width:20px;" library="img/usuarios" name="editar.png"/>
                                    </h:link>
                                    <h:link id="eliminar" style="text-decoration: none;margin-left: 5px; ">                                    
                                        <p:graphicImage style="width:20px; " library="img/usuarios" name="eliminar.png"/>
                                    </h:link>
                                </p:column> 

                            </p:dataTable>
                        </p:panel>
                        
                        <h:panelGrid style="margin-bottom: 10px;" rendered="#{mostrarUsuariosController.habilitarFamiliares}" columns="3">                      
                            <h:outputLabel class="CampoLabel" value="Nombre del Familiar:" />
                            <p:inputText style="width: 240px;" value="#{mostrarUsuariosController.nombreFamiliar}"  >
                                <p:ajax event="keyup" update="tablaFamiliar" listener="#{mostrarUsuariosController.buscarPorNombreFamiliar}" />                                
                            </p:inputText>                        
                        </h:panelGrid>
                        <p:panel id="tablaFamiliar" rendered="#{mostrarUsuariosController.habilitarFamiliares}">
                            <p:dataTable  var="familiar" value="#{mostrarUsuariosController.listaFamiliares}"
                                         paginator="true" rows="10"  
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                                         rowsPerPageTemplate="5,10,15">

                                <p:column headerText="No. Identificacion" width="100">                               
                                    #{familiar.usuidentificacion}
                                </p:column> 
                                <p:column headerText="Nombres">
                                #{familiar.usunombres}
                                </p:column>
                                <p:column headerText="Apellidos">
                                #{familiar.usuapellidos}
                                </p:column> 
                                <p:column headerText="Nombre Funcionario">
                                #{familiar.conyugeid.usunombres} #{familiar.conyugeid.usuapellidos}
                                </p:column>
                                <p:column headerText="Cargo Funcionario">
                                #{familiar.conyugeid.carid.carnombre}
                                </p:column>
                                <p:column headerText="Acciones" width="90">
                                    <h:link id="ver" style="text-decoration: none; ">                                    
                                        <p:graphicImage style="width:20px;margin-left: 5px;" library="img/usuarios" name="ver.png"/>
                                    </h:link>
                                    <h:link id="editar" style="text-decoration: none;margin-left: 5px; ">                                    
                                        <p:graphicImage style="width:20px;" library="img/usuarios" name="editar.png"/>
                                    </h:link>
                                    <h:link id="eliminar" style="text-decoration: none;margin-left: 5px; ">                                    
                                        <p:graphicImage style="width:20px; " library="img/usuarios" name="eliminar.png"/>
                                    </h:link>
                                </p:column> 

                            </p:dataTable>
                        </p:panel>
                    </h:form>
                <br/>
                <p:separator/>                
                <p:dialog modal="true"  widgetVar="efectoCarga" showHeader="false">
                    <h:graphicImage style="width:60px;height: 60px;" library="img/efectoCarga" name="carga.gif" />
                </p:dialog>
                <p:dialog position="top"   header="Registrar Usuario" showEffect="scale" modal="true"  widgetVar="RegistrarUsuario">
                            
                            <h:form id="form">
                                <p:panelGrid style="text-align:left;" styleClass="panelgrid"  id="panel">
                                <p:row>
                                    <p:column>
                                        <h:outputLabel class="CampoLabelObligatorios" value="* Campos Obligatorios" />
                                    </p:column>                                
                                </p:row>                            
                                 <p:row>
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="tipo" value="Tipo: *" />
                                    </p:column>
                                    <p:column>
                                        <p:selectOneMenu id="tipo"  style="width:125px" 
                                        valueChangeListener="#{registrarUsuarioController.cambiarTipoUsuario}"
                                        >                                          
                                            <f:selectItems value="#{registrarUsuarioController.listaTipo}"/>                                            
                                            <f:ajax   execute="tipo" render="panel" />
                                            <p:ajax  onstart="PF('efectoCarga').show()"  onsuccess="PF('efectoCarga').hide()"/>
                                        </p:selectOneMenu>                                                                             
                                    </p:column>
                                    <p:column>
                                        <p:message for="tipo"/>  
                                    </p:column>
                                </p:row>                                    
                                
                                <p:row rendered="#{registrarUsuarioController.camposRegistroFuncionario}">
                                    <p:column style="text-align:right">
                                        <h:outputLabel  class="CampoLabel" for="cargo" value="Cargo: *" />
                                    </p:column>
                                    <p:column>
                                        <p:selectOneMenu id="cargo"  style="width:125px" required="true" 
                                                         valueChangeListener="#{registrarUsuarioController.cambiarCargoFuncionario}"
                                                         requiredMessage="Seleccione un Cargo." 
                                                         value="#{registrarUsuarioController.cargo.carid}">                                            
                                            <f:selectItems value="#{registrarUsuarioController.listaCargos}" var="cargo" 
                                                           itemLabel="#{cargo.carnombre}" itemValue="#{cargo.carid}"/>
                                            <f:ajax  execute="cargo" render="form" />
                                            <p:ajax  onstart="PF('efectoCarga').show()"  onsuccess="PF('efectoCarga').hide()"/>
                                        </p:selectOneMenu>                                                                             
                                    </p:column>
                                    <p:column>
                                        <p:message for="cargo"/>  
                                    </p:column>
                                </p:row>
                                <p:row rendered="#{registrarUsuarioController.camposRegistroFuncionarioDocente}">
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="dependenciaDocente" value="Dependencia: *" />
                                    </p:column>
                                    <p:column>
                                        <p:selectOneMenu id="dependenciaDocente"  style="width:160px"                                                          
                                                         value="#{registrarUsuarioController.facultad.uniid}">
                                            <f:selectItem itemLabel="Seleccionar..." itemValue="0" />
                                            <f:selectItems value="#{registrarUsuarioController.listaFacultades}" var="facultadDocente"
                                                           itemLabel="#{facultadDocente.uninombre}" itemValue="#{facultadDocente.uniid}"/>
                                            <f:validator validatorId="ValidarCamposSeleccionar" />

                                        </p:selectOneMenu>                                                                             
                                    </p:column>
                                    <p:column>
                                        <p:message for="dependenciaDocente"/>  
                                    </p:column>
                                </p:row>
                                <p:row rendered="#{registrarUsuarioController.camposRegistroFuncionarioAdministrativo}">
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="dependenciaAdministrativo" value="Dependencia: *" />
                                    </p:column>
                                    <p:column>
                                        <p:selectOneMenu id="dependenciaAdministrativo"  style="width:160px"                                                          
                                                         value="#{registrarUsuarioController.unidadAcademica.uniid}">
                                            <f:selectItem itemLabel="Seleccionar.." itemValue="0" />
                                            <f:selectItems value="#{registrarUsuarioController.listaUnidadAcademica}"
                                                           var="unidad" itemLabel="#{unidad.uninombre}" itemValue="#{unidad.uniid}"/> 
                                            <f:validator validatorId="ValidarCamposSeleccionar" />
                                        </p:selectOneMenu>                                                                             
                                    </p:column>
                                    <p:column>
                                        <p:message for="dependenciaAdministrativo"/>  
                                    </p:column>
                                </p:row>                           
                                <p:row id="filaFacultad" rendered="#{registrarUsuarioController.camposRegistroEstudiante}">
                                    <p:column style="text-align:right">
                                        <p:outputLabel styleClass="CampoLabel" for="facultad" value="Facultad: *" />
                                    </p:column>
                                    <p:column>
                                        <p:selectOneMenu id="facultad"  style="width:160px"  
                                                         value="#{registrarUsuarioController.facultad.uniid}" >
                                            <f:selectItem itemLabel="Seleccione.." itemValue="0" />
                                            <f:selectItems value="#{registrarUsuarioController.listaFacultades}" 
                                                           var="facultad" itemLabel="#{facultad.uninombre}" 
                                                           itemValue="#{facultad.uniid}"/>
                                            <f:validator validatorId="ValidarCamposSeleccionar"/>
                                        </p:selectOneMenu>                                                                             
                                    </p:column>
                                    <p:column>
                                        <p:message for="facultad"/>  
                                    </p:column>
                                </p:row>                  
                                
                                <p:row rendered="#{registrarUsuarioController.camposRegistroFamiliar}">
                                    <p:column style="text-align:right">
                                        <p:outputLabel styleClass="CampoLabel"  value="Empleado: *" />
                                    </p:column>
                                    <p:column>                                
                                        <p:commandButton value="seleccionar" style="background: #22419A;color:#FFFFFF;font-style: italic" 
                                                          onclick="PF('seleccionarFuncionario').show()" onstart="PF('efectoCarga').show()"  onsuccess="PF('efectoCarga').hide()"/>
                                    </p:column>
                                    <p:column>
                                        <p:graphicImage rendered="#{registrarUsuarioController.funcionarioSeleccionado}" style="margin-left: 4px;" library="img" name="seleccione.png"/>
                                    </p:column>
                                </p:row>
                                    <p:row rendered="#{registrarUsuarioController.camposRegistroFamiliar}">
                                    <p:column style="text-align:right;height: 30px;">
                                        <p:outputLabel styleClass="CampoLabel" for="nombreFuncionario" value="Nombre Funcionario: *" />
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel style="font-size:15px;" 
                                                     id="nombreFuncionario"   
                                                     value="#{registrarUsuarioController.funcionario.usunombres} #{registrarUsuarioController.funcionario.usuapellidos}">
                                                     
                                        </p:outputLabel>                               
                                                                       
                                    </p:column>
                                    <p:column>
                                    </p:column>
                                </p:row>
                                <p:row rendered="#{registrarUsuarioController.camposRegistroFamiliar}">
                                    <p:column style="text-align:right;height:30px; ">
                                        <h:outputLabel class="CampoLabel" for="dependenciaFuncionario" value="Dependencia Funcionario: *" />
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel  style="font-size:15px; width: 160px;" 
                                                     id="dependenciaFuncionario" 
                                                     value="#{registrarUsuarioController.funcionario.uniid.uninombre}"/>                             
                                                 
                                        
                                    </p:column>
                                    <p:column>                                        
                                    </p:column>
                                </p:row>                                                            
                                <p:row>
                                    <p:column style="text-align: right;">                                       
                                        <h:outputLabel class="CampoLabel" for="fechaNacimiento" value="Fecha de Nacimiento: *" />
                                    </p:column>
                                    <p:column>
                                        <p:calendar value="#{registrarUsuarioController.usuario.usufechanacimiento}" size="10" id="fechaNacimiento"  required="true" 
                                                    requiredMessage="Seleccione una Fecha de Nacimiento." 
                                                    showOn="button" navigator="true" pattern="yyyy-MM-dd" 
                                                    />
                                    </p:column>
                                    
                                    <p:column>
                                        <p:message for="fechaNacimiento"/>
                                    </p:column>                                     
                                </p:row>
                                <p:row>
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="numeroIdentificacion" value="No. Identificación: *" />
                                    </p:column>
                                    <p:column>
                                        <p:inputText style="width: 110px;font-size:15px" 
                                                     id="numeroIdentificacion" value="#{registrarUsuarioController.numeroIdentificacion}"
                                                   required="true" requiredMessage="Campo Obligatorio.">                                             
                                                <f:validator validatorId="ValidarCampoNumeroIdentificacion"/>                                                                                    
                                        </p:inputText>                                
                                    </p:column>
                                    <p:column>
                                        <p:message for="numeroIdentificacion"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="nombres" value="Nombres: *" />
                                    </p:column>
                                    <p:column>
                                        <p:inputText style="width: 140px;font-size:15px" 
                                                     id="nombres" value="#{registrarUsuarioController.usuario.usunombres}"
                                                   required="true" requiredMessage="Campo Obligatorio.">
                                            <f:validator validatorId="ValidarCampoSoloLetrasYespacio"/>
                                        </p:inputText>                                
                                    </p:column>
                                    <p:column>
                                        <p:message for="nombres"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="apellidos" value="Apellidos: *" />
                                    </p:column>
                                    <p:column>
                                        <p:inputText style="width: 140px;font-size:15px" 
                                                     id="apellidos" value="#{registrarUsuarioController.usuario.usuapellidos}"
                                                   required="true" requiredMessage="Campo Obligatorio.">
                                            <f:validator validatorId="ValidarCampoSoloLetrasYespacio"/>
                                        </p:inputText>                                
                                    </p:column>
                                    <p:column>
                                        <p:message for="apellidos"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="nombreUsuario" value="Nombre Usuario: *" />
                                    </p:column>
                                    <p:column>
                                        <p:inputText style="width: 120px;font-size:15px" 
                                                     id="nombreUsuario" value="#{registrarUsuarioController.usuario.usunombreusuario}"
                                                   required="true" requiredMessage="Campo Obligatorio.">                                            
                                            <f:validator validatorId="ValidarCampoNombreUsuario"/>
                                        </p:inputText>                                
                                    </p:column>
                                    <p:column>
                                        <p:message for="nombreUsuario"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="contrasena" value="Contraseña: *" />
                                    </p:column>
                                    <p:column>
                                        <p:password style="width: 120px;font-size:15px" 
                                                    id="contrasena" value="#{registrarUsuarioController.contrasena}"
                                                    required="true" requiredMessage="Campo Obligatorio."
                                                    validator="#{registrarUsuarioController.validateContrasena}">
                                            <f:validator validatorId="ValidarCampoMaximo20Caracteres"/>
                                            <f:validator validatorId="ValidarCampoMinimo6Caracteres"/>
                                        </p:password>                                
                                    </p:column>
                                    <p:column>
                                        <p:message for="contrasena"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column>                                        
                                    </p:column>
                                    <p:column>
                                        <h:outputLabel class="CampoLabelEspecificacion"   value="Entre 6 y 20 caracteres AlfaNumericos." />
                                    </p:column>
                                    <p:column>                                        
                                    </p:column>                                        
                                </p:row>
                                <p:row>
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="confirmarContrasena" value="Confirmar Contraseña: *" />
                                    </p:column>
                                    <p:column>
                                        <p:password  style="width: 120px;font-size:15px" 
                                                     id="confirmarContrasena" value="#{registrarUsuarioController.repetircontrasena}"
                                                   required="true" requiredMessage="Campo Obligatorio."
                                                   validator="#{registrarUsuarioController.validateRepitaContrasena}">                                            
                                        </p:password>                                
                                    </p:column>
                                    <p:column>
                                        <p:message for="confirmarContrasena"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="correoElectronico" value="Correo Electrónico: *" />
                                    </p:column>
                                    <p:column>
                                        <p:inputText style="width: 180px;font-size:15px" 
                                                     id="correoElectronico" value="#{registrarUsuarioController.usuario.usuemail}"
                                                   required="true" requiredMessage="Campo Obligatorio.">
                                            <f:validator validatorId="ValidarCampoCorreoElectronico"/>
                                        </p:inputText>
                                    </p:column>
                                    <p:column>
                                        <p:message for="correoElectronico"/>
                                    </p:column>

                                </p:row>
                                <p:row>
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="telefono" value="Teléfono: " />
                                    </p:column>
                                    <p:column>
                                        <p:inputText style="width: 100px;font-size:15px" 
                                                     id="telefono" value="#{registrarUsuarioController.usuario.usutelefono}"
                                                   >                              
                                        </p:inputText>
                                    </p:column>
                                    <p:column>
                                        <p:message for="telefono"/>
                                    </p:column>

                                </p:row>
                                <p:row>
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="sexo" value="Sexo: * " />
                                    </p:column>
                                    <p:column>
                                        <p:selectOneRadio    id="sexo" value="#{registrarUsuarioController.usuario.usugenero}" required="true" requiredMessage="Seleccione Sexo.">
                                            <f:selectItem itemLabel="M" itemValue="M" />
                                            <f:selectItem itemLabel="F" itemValue="F" />                                            
                                        </p:selectOneRadio>
                                    </p:column>
                                    <p:column>
                                        <p:message for="sexo"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column>
                                        
                                    </p:column>
                                    <p:column>
                                        
                                    </p:column>
                                    <p:column>
                                        
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column>
                                        
                                    </p:column>
                                    <p:column>
                                        <p:commandButton   style="background: #22419A;color:#FFFFFF;font-style: italic" 
                                                           action="#{registrarUsuarioController.registrarUsuario()}" value="Registrar" ajax="true" 
                                                           update="panel" id="registrar" onstart="PF('efectoCarga').show()"  onsuccess="PF('efectoCarga').hide()"
                                                           />
                                       
                                    </p:column>
                                </p:row>                               
                            </p:panelGrid>                            
                    </h:form>       
                </p:dialog>
                <p:dialog modal="true"  widgetVar="mensajeRegistroExitoso" closable="false">
                    <p:messages  style="font-size: 15px;"  showDetail="true" autoUpdate="true"/>
                    <h:form>
                        <p:commandButton  value="Aceptar" style="background:#22419A; 
                                             color: #FFFFFF;margin-left:70px;"
                                             onclick="PF('mensajeRegistroExitoso').hide()"/>
                    </h:form>
                </p:dialog>
                  
                <p:dialog header="Seleccionar Funcionario" width="700"  modal="true"  widgetVar="seleccionarFuncionario">
                    <h:form id="funcionarios">
                        <br/>
                        <h:panelGrid columns="2">
                            <p:outputLabel value="Nombre del Funcionario:" />
                            <p:inputText style="width: 240px;" value="#{registrarUsuarioController.nombreOApellidos}"  >
                                <p:ajax event="keyup" update="tablaFuncionarios" listener="#{registrarUsuarioController.buscarPorNombreFuncionario}" />                                
                            </p:inputText>                          

                        </h:panelGrid>
                                  
                        <br/>
                        <p:panel id="tablaFuncionarios">
                            <p:dataTable  var="funcionario" value="#{registrarUsuarioController.listaFuncionarios}" 
                                     paginator="true" rows="8"  
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                                     rowsPerPageTemplate="5,8">
                            
                            <p:column headerText="No. Identificacion" width="130" >                                
                                #{funcionario.usuidentificacion} 
                            </p:column> 
                            <p:column headerText="Nombres" >
                                #{funcionario.usunombres}
                            </p:column>
                            <p:column headerText="Apellidos" >
                                #{funcionario.usuapellidos}
                            </p:column>
                            <p:column headerText="Cargo" >
                                #{funcionario.carid.carnombre}
                            </p:column>
                            <p:column headerText="Apellidos" >
                                #{funcionario.uniid.uninombre}
                            </p:column>
                           
                            <p:column headerText="Acciones" width="70">
                                <p:commandLink actionListener="#{registrarUsuarioController.seleccionarFuncionario(funcionario)}" 
                                               id="seleccionar" style="text-decoration: none;color: blue;" 
                                               >                                    
                                    Seleccionar
                                </p:commandLink>
                            </p:column> 

                        </p:dataTable>
                        </p:panel>
                        
                    </h:form>
                </p:dialog>
                
                <p:dialog modal="true"  widgetVar="FuncionarioYaTieneFamiliarAsociado" closable="false">
                    <p:messages  style="font-size: 15px;"  showDetail="true" autoUpdate="true"/>
                    <h:form>
                        <p:commandButton  value="Aceptar" style="background:#22419A; 
                                             color: #FFFFFF;margin-left:150px;"
                                             onclick="PF('FuncionarioYaTieneFamiliarAsociado').hide()"/>
                    </h:form>
                </p:dialog>
            </ui:define>
        </ui:composition>

    </body>
</html>