<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">

    <body>

        <ui:composition template="./../../plantillas/frontEndAdministrador.xhtml">

            <ui:define name="titulo">
                Gestión Usuarios
                
            </ui:define>           

            <ui:define name="title">
                <div class="tituloContenido">
                    GESTIÓN DE USUARIOS                    
                </div>
                
            </ui:define>

            <ui:define name="body">
                
                <br/>
                    <h:form >
                        <h:panelGrid columns="3">        
                                
                                    <h:outputLabel class="CampoLabel" value="Seleccione Tipo Usuario:" />                      
                                    <p:selectOneMenu  id="tipoUsuario" style="width:150px;font-size: 15px;" required="true"
                                    requiredMessage="Seleccione un Tipo Usuario."
                                    valueChangeListener="#{auxiliar.cambiarTipoUsuario}"
                                     >
                                        <f:selectItem itemLabel="Seleccione.." itemValue="Seleccione" />
                                        <f:selectItem itemLabel="Estudiante" itemValue="Estudiante" />
                                        <f:selectItem itemLabel="Familiar" itemValue="Familiar" />
                                        <f:selectItem itemLabel="Funcionario" itemValue="Funcionario" />
                                        <f:ajax execute="tipoUsuario" render=":tablasUsuarios"/>
                                    </p:selectOneMenu>                     
                                    <p:commandButton  value="Registrar Nuevo Usuario" style="background:#22419A; 
                                         color: #FFFFFF; margin-left: 395px;" 
                                         onclick="PF('RegistrarUsuario').show();"
                                    />                 
                        </h:panelGrid>
                    </h:form>                   
                        <p:separator/>
                        <br/>
                    <h:form id="tablasUsuarios">
                        <h:panelGrid style="margin-bottom: 10px;" rendered="#{auxiliar.tablaFuncionario}" columns="3">                      
                                    <h:outputLabel class="CampoLabel" value="Nombre ó Apellido del Estudiante:" />
                                    <p:autoComplete size="30">
                                    </p:autoComplete>
                                    <p:commandButton style="background:#22419A; 
                                             color: #FFFFFF;"  value="Buscar" 
                                    />                  
                        </h:panelGrid>
                                                                    
                        <p:dataTable rendered="#{auxiliar.tablaFuncionario}" var="usuario" value="#{auxiliar.listaUsuarios}"
                                     paginator="true" rows="10"  
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                                     rowsPerPageTemplate="5,10,15">
                            
                            <p:column headerText="No. Identificacion" width="100">                               
                                    #{usuario.numeroIdentificacion}
                            </p:column> 
                            <p:column headerText="Nombres">
                                #{usuario.nombres}
                            </p:column>
                            <p:column headerText="Apellidos">
                                #{usuario.apellidos}
                            </p:column> 
                            <p:column headerText="Tipo">
                                #{usuario.tipo}
                            </p:column>
                            <p:column headerText="Cargo">
                                Profesor
                            </p:column>
                            <p:column headerText="Acciones" width="90">
                                <h:link id="ver" style="text-decoration: none; ">                                    
                                    <p:graphicImage style="width:20px;margin-left: 5px;" library="img/usuarios" name="ver.png"/>
                                </h:link>
                                <h:link id="editar" style="text-decoration: none;margin-left: 5px; ">                                    
                                    <p:graphicImage style="width:20px;" library="img/usuarios" name="editar.png"/>
                                </h:link>
                                <h:link id="eliminar" style="text-decoration: none;margin-left: 5px; ">                                    
                                    <p:graphicImage style="width:20px; " library="img/usuarios" name="eliminar.png"/>
                                </h:link>
                            </p:column> 

                        </p:dataTable>
                        
                        
                        <h:panelGrid style="margin-bottom: 10px;" rendered="#{auxiliar.tablaEstudiantes}" columns="3">                      
                                    <h:outputLabel class="CampoLabel" value="Nombre ó Apellido del Estudiante:" />
                                    <p:autoComplete size="30">
                                    </p:autoComplete>
                                    <p:commandButton style="background:#22419A; 
                                             color: #FFFFFF;"  value="Buscar" 
                                    />                  
                        </h:panelGrid>                                                                     
                        <p:dataTable rendered="#{auxiliar.tablaEstudiantes}" var="usuario" value="#{auxiliar.listaUsuarios}"
                                     paginator="true" rows="10"  
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                                     rowsPerPageTemplate="5,10,15">
                            
                            <p:column headerText="No. Identificacion" width="100">                               
                                    #{usuario.numeroIdentificacion}
                            </p:column> 
                            <p:column headerText="Nombres">
                                #{usuario.nombres}
                            </p:column>
                            <p:column headerText="Apellidos">
                                #{usuario.apellidos}
                            </p:column> 
                            <p:column headerText="Tipo">
                                Estudiante
                            </p:column>
                            <p:column headerText="Facultad">
                                Ingenieria Electronica y Telecomunicaciones.
                            </p:column> 
                            <p:column headerText="Acciones" width="90">
                                <h:link id="ver" style="text-decoration: none; ">                                    
                                    <p:graphicImage style="width:20px;margin-left: 5px;" library="img/usuarios" name="ver.png"/>
                                </h:link>
                                <h:link id="editar" style="text-decoration: none;margin-left: 5px; ">                                    
                                    <p:graphicImage style="width:20px;" library="img/usuarios" name="editar.png"/>
                                </h:link>
                                <h:link id="eliminar" style="text-decoration: none;margin-left: 5px; ">                                    
                                    <p:graphicImage style="width:20px; " library="img/usuarios" name="eliminar.png"/>
                                </h:link>
                            </p:column> 

                        </p:dataTable>
                        
                        <h:panelGrid style="margin-bottom: 10px;" rendered="#{auxiliar.tablaFamiliar}" columns="3">                      
                                    <h:outputLabel class="CampoLabel" value="Nombre ó Apellido del Estudiante:" />
                                    <p:autoComplete size="30">
                                    </p:autoComplete>
                                    <p:commandButton style="background:#22419A; 
                                             color: #FFFFFF;"  value="Buscar" 
                                    />                  
                        </h:panelGrid>                                                                     
                        <p:dataTable rendered="#{auxiliar.tablaFamiliar}" var="usuario" value="#{auxiliar.listaUsuarios}"
                                     paginator="true" rows="10"  
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                                     rowsPerPageTemplate="5,10,15">
                            
                            <p:column headerText="No. Identificacion" width="100">                               
                                    #{usuario.numeroIdentificacion}
                            </p:column> 
                            <p:column headerText="Nombres">
                                #{usuario.nombres}
                            </p:column>
                            <p:column headerText="Apellidos">
                                #{usuario.apellidos}
                            </p:column> 
                            <p:column headerText="Tipo">
                                Familiar
                            </p:column> 
                            <p:column headerText="Acciones" width="90">
                                <h:link id="ver" style="text-decoration: none; ">                                    
                                    <p:graphicImage style="width:20px;margin-left: 5px;" library="img/usuarios" name="ver.png"/>
                                </h:link>
                                <h:link id="editar" style="text-decoration: none;margin-left: 5px; ">                                    
                                    <p:graphicImage style="width:20px;" library="img/usuarios" name="editar.png"/>
                                </h:link>
                                <h:link id="eliminar" style="text-decoration: none;margin-left: 5px; ">                                    
                                    <p:graphicImage style="width:20px; " library="img/usuarios" name="eliminar.png"/>
                                </h:link>
                            </p:column> 

                        </p:dataTable>
                    </h:form>
                <br/>
                <p:separator/>
                
                <p:dialog position="top"   header="Registrar Usuario" showEffect="scale" modal="true"  widgetVar="RegistrarUsuario">
                            <h:form id="form">
                                <p:panelGrid style="text-align:left;" styleClass="panelgrid"  id="panel">
                                <p:row>
                                    <p:column>
                                        <h:outputLabel class="CampoLabelObligatorios" value="* Campos Obligatorios" />
                                    </p:column>                                
                                </p:row>                            
                                 <p:row>
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="tipo" value="Tipo: *" />
                                    </p:column>
                                    <p:column>
                                        <p:selectOneMenu id="tipo"  style="width:125px" required="true"
                                        requiredMessage="Seleccione un Tipo Usuario."
                                        valueChangeListener="#{auxiliar.cambiarTipo}">
                                            <f:selectItem itemLabel="Seleccione.." itemValue="Seleccione" />
                                            <f:selectItem itemLabel="Estudiante" itemValue="Estudiante" />
                                            <f:selectItem itemLabel="Familiar" itemValue="Familiar" />
                                            <f:selectItem itemLabel="Funcionario" itemValue="Funcionario" />
                                            <f:ajax  execute="tipo" render="form" />
                                        </p:selectOneMenu>                                                                             
                                    </p:column>
                                    <p:column>
                                        <p:message for="tipo"/>  
                                    </p:column>
                                </p:row>                                    
                                <p:row rendered="#{auxiliar.cargo}">
                                    <p:column style="text-align:right">
                                        <h:outputLabel  class="CampoLabel" for="cargo" value="Cargo: *" />
                                    </p:column>
                                    <p:column>
                                        <p:selectOneMenu id="cargo"  style="width:125px" required="true" requiredMessage="Seleccione un Cargo.">
                                            <f:selectItem itemLabel="Seleccione.." itemValue="" />
                                            <f:selectItem itemLabel="Profesor" itemValue="Profesor" />
                                            <f:selectItem itemLabel="Administrativo" itemValue="Administrativo" />                                            
                                        </p:selectOneMenu>                                                                             
                                    </p:column>
                                    <p:column>
                                        <p:message for="cargo"/>  
                                    </p:column>
                                </p:row>
                                <p:row rendered="#{auxiliar.dependencia}">
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="dependencia" value="Dependencia: *" />
                                    </p:column>
                                    <p:column>
                                        <p:selectOneMenu id="dependencia"  style="width:125px" required="true" requiredMessage="Seleccione una Dependencia.">
                                            <f:selectItem itemLabel="Seleccione.." itemValue="" />
                                            <f:selectItem itemLabel="Fac. Ingenieria Electronica y telecomunicaciones" itemValue="r" />
                                            <f:selectItem itemLabel="Fac. Ingenieria Civil" itemValue="m" />                                            
                                        </p:selectOneMenu>                                                                             
                                    </p:column>
                                    <p:column>
                                        <p:message for="dependencia"/>  
                                    </p:column>
                                </p:row>
                                <p:row id="filaFacultad" rendered="#{auxiliar.facultad}">
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="facultad" value="Facultad: *" />
                                    </p:column>
                                    <p:column>
                                        <p:selectOneMenu id="facultad"  style="width:125px" required="true" requiredMessage="Seleccione una Facultad.">
                                            <f:selectItem itemLabel="Seleccione.." itemValue="" />
                                            <f:selectItem itemLabel="Fac. Ingenieria Electronica y telecomunicaciones" itemValue="r" />
                                            <f:selectItem itemLabel="Fac. Ingenieria Civil" itemValue="m" />                                            
                                        </p:selectOneMenu>                                                                             
                                    </p:column>
                                    <p:column>
                                        <p:message for="facultad"/>  
                                    </p:column>
                                </p:row>
                                <p:row rendered="#{auxiliar.funcionario}">
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="empleado" value="Empleado: *" />
                                    </p:column>
                                    <p:column>                                
                                        <p:commandButton value="seleccionar" style="background: #22419A;color:#FFFFFF;font-style: italic" 
                                         onclick="PF('seleccionarFamiliar').show();"/>
                                    </p:column>
                                    <p:column>
                                        <p:message for="nombreEmpleado"/>
                                    </p:column>
                                </p:row>
                                    <p:row rendered="#{auxiliar.nombreFuncionario}">
                                    <p:column style="text-align:right;height: 30px;">
                                        <h:outputLabel class="CampoLabel" for="nombreEmpleado" value="Nombre Empleado: *" />
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel  style="font-size:15px" 
                                                     id="nombreEmpleado" 
                                                     value="#{auxiliar.usuarioSeleccionado.nombres} #{auxiliar.usuarioSeleccionado.apellidos}">
                                            
                                        </p:outputLabel>                                
                                    </p:column>
                                    <p:column>
                                    </p:column>
                                </p:row>
                                <p:row rendered="#{auxiliar.dependenciaFuncionario}">
                                    <p:column style="text-align:right;height:30px; ">
                                        <h:outputLabel class="CampoLabel" for="dependenciaEmpleado" value="Dependencia Empleado: *" />
                                    </p:column>
                                    <p:column>
                                        <p:outputLabel style="font-size:15px" 
                                                     id="dependenciaEmpleado" 
                                                     value="#{auxiliar.usuarioSeleccionado.dependencia}">                              
                                        </p:outputLabel>         
                                        
                                    </p:column>
                                    <p:column>                                        
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column style="text-align: right;">                                       
                                        <h:outputLabel class="CampoLabel" for="fechaNacimiento" value="Fecha de Nacimiento: *" />
                                    </p:column>
                                    <p:column>
                                        <p:calendar size="10" id="fechaNacimiento"  required="true" 
                                                    requiredMessage="Seleccione una Fecha de Nacimiento."
                                                    showOn="button" navigator="true" pattern="yyyy-MM-dd" 
                                                    />
                                    </p:column>
                                    
                                    <p:column>
                                        <p:message for="fechaNacimiento"/>
                                    </p:column>                                     
                                </p:row>
                                <p:row>
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="numeroIdentificacion" value="No. Identificacion: *" />
                                    </p:column>
                                    <p:column>
                                        <p:inputText style="width: 110px;font-size:15px" 
                                                     id="numeroIdentificacion" value=""
                                                   required="true" requiredMessage="Campo Obligatorio.">                              
                                        </p:inputText>                                
                                    </p:column>
                                    <p:column>
                                        <p:message for="numeroIdentificacion"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="nombres" value="Nombres: *" />
                                    </p:column>
                                    <p:column>
                                        <p:inputText style="width: 140px;font-size:15px" 
                                                     id="nombres" value=""
                                                   required="true" requiredMessage="Campo Obligatorio.">                              
                                        </p:inputText>                                
                                    </p:column>
                                    <p:column>
                                        <p:message for="nombres"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="apellidos" value="Apellidos: *" />
                                    </p:column>
                                    <p:column>
                                        <p:inputText style="width: 140px;font-size:15px" 
                                                     id="apellidos" value=""
                                                   required="true" requiredMessage="Campo Obligatorio.">                              
                                        </p:inputText>                                
                                    </p:column>
                                    <p:column>
                                        <p:message for="apellidos"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="nombreUsuario" value="Nombre Usuario: *" />
                                    </p:column>
                                    <p:column>
                                        <p:inputText style="width: 120px;font-size:15px" 
                                                     id="nombreUsuario" value=""
                                                   required="true" requiredMessage="Campo Obligatorio.">                              
                                        </p:inputText>                                
                                    </p:column>
                                    <p:column>
                                        <p:message for="nombreUsuario"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="contrasena" value="Contraseña: *" />
                                    </p:column>
                                    <p:column>
                                        <p:password style="width: 120px;font-size:15px" 
                                                     id="contrasena" value=""
                                                   required="true" requiredMessage="Campo Obligatorio.">                              
                                        </p:password>                                
                                    </p:column>
                                    <p:column>
                                        <p:message for="contrasena"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column>                                        
                                    </p:column>
                                    <p:column>
                                        <h:outputLabel class="CampoLabelEspecificacion"  value="Entre 6 y 20 caracteres AlfaNumericos." />
                                    </p:column>
                                    <p:column>                                        
                                    </p:column>                                        
                                </p:row>
                                <p:row>
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="confirmarContrasena" value="Confirmar Contraseña: *" />
                                    </p:column>
                                    <p:column>
                                        <p:password style="width: 120px;font-size:15px" 
                                                     id="confirmarContrasena" value=""
                                                   required="true" requiredMessage="Campo Obligatorio.">                              
                                        </p:password>                                
                                    </p:column>
                                    <p:column>
                                        <p:message for="confirmarContrasena"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="correoElectronico" value="Correo Electrónico: *" />
                                    </p:column>
                                    <p:column>
                                        <p:inputText style="width: 180px;font-size:15px" 
                                                     id="correoElectronico" value=""
                                                   required="true" requiredMessage="Campo Obligatorio.">                              
                                        </p:inputText>
                                    </p:column>
                                    <p:column>
                                        <p:message for="correoElectronico"/>
                                    </p:column>

                                </p:row>
                                <p:row>
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="telefono" value="Teléfono: " />
                                    </p:column>
                                    <p:column>
                                        <p:inputText style="width: 100px;font-size:15px" 
                                                     id="telefono" value=""
                                                   required="true" requiredMessage="Campo Obligatorio.">                              
                                        </p:inputText>
                                    </p:column>
                                    <p:column>
                                        <p:message for="telefono"/>
                                    </p:column>

                                </p:row>
                                <p:row>
                                    <p:column style="text-align:right">
                                        <h:outputLabel class="CampoLabel" for="sexo" value="Sexo: * " />
                                    </p:column>
                                    <p:column>
                                        <p:selectOneRadio    id="sexo" value="" required="true" requiredMessage="Seleccione Sexo.">
                                            <f:selectItem itemLabel="M" itemValue="M" />
                                            <f:selectItem itemLabel="F" itemValue="F" />                                            
                                        </p:selectOneRadio>
                                    </p:column>
                                    <p:column>
                                        <p:message for="sexo"/>
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column>
                                        
                                    </p:column>
                                    <p:column>
                                        
                                    </p:column>
                                    <p:column>
                                        
                                    </p:column>
                                </p:row>
                                <p:row>
                                    <p:column>
                                        
                                    </p:column>
                                    <p:column>
                                        <p:commandButton   style="background: #22419A;color:#FFFFFF;font-style: italic" 
                                                           value="Registrar" ajax="true" update="panel" id="registrar"/>
                                    </p:column>
                                </p:row>                               
                            </p:panelGrid>                            
                    </h:form>    
                            
                        
                
                </p:dialog>
                  
                <p:dialog header="Seleccionar Empleado" width="700"  modal="true"  widgetVar="seleccionarFamiliar">
                    <h:form>
                        <br/>
                        <h:panelGrid columns="3">
                            <p:outputLabel value="Nombre del Empleado" />
                            <p:autoComplete >
                            </p:autoComplete> 

                            <h:commandButton style="background:#22419A; 
                                         color: #FFFFFF;"  value="Buscar" />

                        </h:panelGrid>
                        <br/>
                        <p:dataTable var="usuario" value="#{auxiliar.listaUsuarios}" 
                                     paginator="true" rows="10"  
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                                     rowsPerPageTemplate="5,10,15">
                            
                            <p:column headerText="No. Identificacion" width="130" >                                
                                #{usuario.numeroIdentificacion} 
                            </p:column> 
                            <p:column headerText="Nombres" >
                                #{usuario.nombres}
                            </p:column>
                            <p:column headerText="Apellidos" >
                                #{usuario.apellidos}
                            </p:column>
                           
                            <p:column headerText="Acciones" width="70">
                                <p:commandLink actionListener="#{auxiliar.seleccionarEmpleado(usuario)}" 
                                               id="seleccionar" style="text-decoration: none;color: blue;" 
                                               >                                    
                                    Seleccionar
                                </p:commandLink>
                            </p:column> 

                        </p:dataTable>
                    </h:form>
                </p:dialog>
                        
                        
                                    
                             
            </ui:define>

        </ui:composition>

    </body>
</html>